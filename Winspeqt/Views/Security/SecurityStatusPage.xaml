<Page
    x:Class="Winspeqt.Views.Security.SecurityStatusPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:helpers="using:Winspeqt.Helpers"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Page.Resources>

    <ScrollViewer>
        <Grid Padding="60">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,32">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button 
                    Grid.Column="0"
                    Content="â† Back"
                    Click="BackButton_Click"
                    Background="Transparent"
                    BorderThickness="0"
                    FontSize="16"
                    Margin="0,0,20,0"/>

                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock 
                        Text="Security Status Check" 
                        FontSize="36" 
                        FontWeight="Bold"/>
                    <TextBlock 
                        Text="Check the health of your PC's security features" 
                        FontSize="18" 
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Margin="0,4,0,0"/>
                </StackPanel>


            </Grid>

            <!-- Overall Security Score -->
            <Border 
                Grid.Row="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="2"
                CornerRadius="16"
                Padding="40"
                Margin="0,0,0,32">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Score Circle -->
                    <Grid Grid.Column="0" Width="96" Height="96" Margin="0,0,40,0">
                        <!-- Background track -->
                        <Ellipse
        Width="96" Height="96"
        Stroke="{ThemeResource CardStrokeColorDefaultBrush}"
        StrokeThickness="8"
        Fill="Transparent"/>
                        <!-- Foreground arc (drawn in code-behind) -->
                        <Path
        x:Name="ScoreArc"
        StrokeThickness="8"
        StrokeStartLineCap="Round"
        StrokeEndLineCap="Round"
        Fill="Transparent"/>
                        <!-- Score text -->
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock
            x:Name="ScoreNumber"
            Text="{Binding OverallScore, Mode=OneWay}"
            FontSize="28"
            FontWeight="Bold"
            HorizontalAlignment="Center"/>
                            <TextBlock
            Text="/ 100"
            FontSize="12"
            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
            HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <!-- Overall Status -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock 
                            Text="Overall Security Health" 
                            FontSize="24" 
                            FontWeight="SemiBold"
                            Margin="0,0,0,12"/>
                        <TextBlock 
                            Text="{Binding OverallStatus, Mode=OneWay}" 
                            FontSize="20"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            TextWrapping="Wrap"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Security Components Grid -->
            <Grid Grid.Row="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Windows Defender Card -->
                <Border 
                    Grid.Row="0" Grid.Column="0"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="2"
                    CornerRadius="12"
                    Padding="28"
                    Margin="0,0,12,12">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock 
                                    Text="ðŸ›¡ï¸" 
                                    FontSize="28"
                                    Margin="0,0,12,0"/>
                                <TextBlock 
                                    Text="Windows Defender" 
                                    FontSize="22" 
                                    FontWeight="SemiBold"
                                    VerticalAlignment="Center"/>
                            </StackPanel>
                            <Button 
                                Content="â„¹ï¸"
                                Click="ShowDefenderInfo_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="20"
                                Padding="8"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"/>
                        </Grid>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <TextBlock 
                                Text="{Binding DefenderStatus.Icon, Mode=OneWay}" 
                                FontSize="32"
                                Foreground="{Binding DefenderStatus.Color, Mode=OneWay}"
                                Margin="0,0,12,0"/>
                            <TextBlock 
                                Text="{Binding DefenderStatus.Status, Mode=OneWay}" 
                                FontSize="24" 
                                FontWeight="SemiBold"
                                Foreground="{Binding DefenderStatus.Color, Mode=OneWay}"
                                VerticalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock 
                            Text="{Binding DefenderStatus.Message, Mode=OneWay}" 
                            FontSize="15"
                            TextWrapping="Wrap"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            LineHeight="22"
                            Margin="0,0,0,12"/>

                        <Button 
                            Content="ðŸ”§ Open Windows Security"
                            Click="OpenDefenderSettings_Click"
                            HorizontalAlignment="Stretch"
                            Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Firewall Card -->
                <Border 
                    Grid.Row="0" Grid.Column="1"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="2"
                    CornerRadius="12"
                    Padding="28"
                    Margin="12,0,0,12">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock 
                                    Text="ðŸ”¥" 
                                    FontSize="28"
                                    Margin="0,0,12,0"/>
                                <TextBlock 
                                    Text="Windows Firewall" 
                                    FontSize="22" 
                                    FontWeight="SemiBold"
                                    VerticalAlignment="Center"/>
                            </StackPanel>
                            <Button 
                                Content="â„¹ï¸"
                                Click="ShowFirewallInfo_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="20"
                                Padding="8"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"/>
                        </Grid>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <TextBlock 
                                Text="{Binding FirewallStatus.Icon, Mode=OneWay}" 
                                FontSize="32"
                                Foreground="{Binding FirewallStatus.Color, Mode=OneWay}"
                                Margin="0,0,12,0"/>
                            <TextBlock 
                                Text="{Binding FirewallStatus.Status, Mode=OneWay}" 
                                FontSize="24" 
                                FontWeight="SemiBold"
                                Foreground="{Binding FirewallStatus.Color, Mode=OneWay}"
                                VerticalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock 
                            Text="{Binding FirewallStatus.Message, Mode=OneWay}" 
                            FontSize="15"
                            TextWrapping="Wrap"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            LineHeight="22"
                            Margin="0,0,0,12"/>

                        <Button 
                            Content="ðŸ”§ Open Firewall Settings"
                            Click="OpenFirewallSettings_Click"
                            HorizontalAlignment="Stretch"
                            Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Windows Update Card -->
                <Border 
                    Grid.Row="1" Grid.Column="0"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="2"
                    CornerRadius="12"
                    Padding="28"
                    Margin="0,0,12,12">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock 
                                    Text="ðŸ”„" 
                                    FontSize="28"
                                    Margin="0,0,12,0"/>
                                <TextBlock 
                                    Text="Windows Update" 
                                    FontSize="22" 
                                    FontWeight="SemiBold"
                                    VerticalAlignment="Center"/>
                            </StackPanel>
                            <Button 
                                Content="â„¹ï¸"
                                Click="ShowUpdateInfo_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="20"
                                Padding="8"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"/>
                        </Grid>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <TextBlock 
                                Text="{Binding UpdateStatus.Icon, Mode=OneWay}" 
                                FontSize="32"
                                Foreground="{Binding UpdateStatus.Color, Mode=OneWay}"
                                Margin="0,0,12,0"/>
                            <TextBlock 
                                Text="{Binding UpdateStatus.Status, Mode=OneWay}" 
                                FontSize="24" 
                                FontWeight="SemiBold"
                                Foreground="{Binding UpdateStatus.Color, Mode=OneWay}"
                                VerticalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock 
                            Text="{Binding UpdateStatus.Message, Mode=OneWay}" 
                            FontSize="15"
                            TextWrapping="Wrap"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            LineHeight="22"
                            Margin="0,0,0,12"/>

                        <Button 
                            Content="ðŸ”§ Open Windows Update"
                            Click="OpenWindowsUpdate_Click"
                            HorizontalAlignment="Stretch"
                            Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- BitLocker Card -->
                <Border 
                    Grid.Row="1" Grid.Column="1"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="2"
                    CornerRadius="12"
                    Padding="28"
                    Margin="12,0,0,12">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock 
                                    Text="ðŸ”" 
                                    FontSize="28"
                                    Margin="0,0,12,0"/>
                                <TextBlock 
                                    Text="BitLocker Encryption" 
                                    FontSize="22" 
                                    FontWeight="SemiBold"
                                    VerticalAlignment="Center"/>
                            </StackPanel>
                            <Button 
                                Content="â„¹ï¸"
                                Click="ShowBitLockerInfo_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="20"
                                Padding="8"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"/>
                        </Grid>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <TextBlock 
                                Text="{Binding BitLockerStatus.Icon, Mode=OneWay}" 
                                FontSize="32"
                                Foreground="{Binding BitLockerStatus.Color, Mode=OneWay}"
                                Margin="0,0,12,0"/>
                            <TextBlock 
                                Text="{Binding BitLockerStatus.Status, Mode=OneWay}" 
                                FontSize="24" 
                                FontWeight="SemiBold"
                                Foreground="{Binding BitLockerStatus.Color, Mode=OneWay}"
                                VerticalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock 
                            Text="{Binding BitLockerStatus.Message, Mode=OneWay}" 
                            FontSize="15"
                            TextWrapping="Wrap"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            LineHeight="22"
                            Margin="0,0,0,12"/>

                        <Button 
                            Content="ðŸ”§ Open Encryption Settings"
                            Click="OpenBitLockerSettings_Click"
                            HorizontalAlignment="Stretch"
                            Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Drive Health Card -->
                <Border 
                    Grid.Row="2" Grid.Column="0"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="2"
                    CornerRadius="12"
                    Padding="28"
                    Margin="0,12,12,0">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock 
                                    Text="ðŸ’¾" 
                                    FontSize="28"
                                    Margin="0,0,12,0"/>
                                <TextBlock 
                                    Text="Drive Health" 
                                    FontSize="22" 
                                    FontWeight="SemiBold"
                                    VerticalAlignment="Center"/>
                            </StackPanel>
                            <Button 
                                Content="â„¹ï¸"
                                Click="ShowDriveHealthInfo_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="20"
                                Padding="8"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"/>
                        </Grid>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <TextBlock 
                                Text="{Binding DriveHealthStatus.Icon, Mode=OneWay}" 
                                FontSize="32"
                                Foreground="{Binding DriveHealthStatus.Color, Mode=OneWay}"
                                Margin="0,0,12,0"/>
                            <TextBlock 
                                Text="{Binding DriveHealthStatus.Status, Mode=OneWay}" 
                                FontSize="24" 
                                FontWeight="SemiBold"
                                Foreground="{Binding DriveHealthStatus.Color, Mode=OneWay}"
                                VerticalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock 
                            Text="{Binding DriveHealthStatus.Message, Mode=OneWay}" 
                            FontSize="15"
                            TextWrapping="Wrap"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            LineHeight="22"
                            Margin="0,0,0,12"/>

                        <Button 
                            Content="ðŸ”§ Open Disk Management"
                            Click="OpenDiskManagement_Click"
                            HorizontalAlignment="Stretch"
                            Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Secure Boot Card -->
                <Border 
                    Grid.Row="2" Grid.Column="1"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="2"
                    CornerRadius="12"
                    Padding="28"
                    Margin="12,12,0,0">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock 
                                    Text="ðŸ”’" 
                                    FontSize="28"
                                    Margin="0,0,12,0"/>
                                <TextBlock 
                                    Text="Secure Boot" 
                                    FontSize="22" 
                                    FontWeight="SemiBold"
                                    VerticalAlignment="Center"/>
                            </StackPanel>
                            <Button 
                                Content="â„¹ï¸"
                                Click="ShowSecureBootInfo_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="20"
                                Padding="8"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"/>
                        </Grid>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <TextBlock 
                                Text="{Binding SecureBootStatus.Icon, Mode=OneWay}" 
                                FontSize="32"
                                Foreground="{Binding SecureBootStatus.Color, Mode=OneWay}"
                                Margin="0,0,12,0"/>
                            <TextBlock 
                                Text="{Binding SecureBootStatus.Status, Mode=OneWay}" 
                                FontSize="24" 
                                FontWeight="SemiBold"
                                Foreground="{Binding SecureBootStatus.Color, Mode=OneWay}"
                                VerticalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock 
                            Text="{Binding SecureBootStatus.Message, Mode=OneWay}" 
                            FontSize="15"
                            TextWrapping="Wrap"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            LineHeight="22"
                            Margin="0,0,0,12"/>

                        <Button 
                            Content="ðŸ”§ View System Information"
                            Click="OpenUEFISettings_Click"
                            HorizontalAlignment="Stretch"
                            Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

            </Grid>

            <!-- Loading Overlay -->
            <Border
                Grid.Row="0" 
                Grid.RowSpan="3"
                Background="#CC000000"
                Visibility="Collapsed">
            </Border>

        </Grid>
    </ScrollViewer>
</Page>